(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{25:function(e,n,t){},45:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t(20),a=t.n(c),u=(t(25),t(10)),i=t(11),o=t(3),s=t(0),d=function(e){var n=e.submission,t=e.changeHandler,r=e.name,c=e.number;return Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{name:"name",value:r,onChange:t})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{name:"number",value:c,onChange:t})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.newSearch,t=e.handleSearch;return Object(s.jsxs)("div",{children:["filter shown with",Object(s.jsx)("input",{value:n,onChange:t})]})},b=t(5),j=t.n(b),f="/api/persons",h={getAll:function(){return j.a.get(f).then((function(e){return e.data}))},create:function(e){return j.a.post(f,e).then((function(e){return e.data}))},update:function(e,n){return j.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return j.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))}},m=function(e){var n=e.person,t=e.deleted;return Object(s.jsxs)("li",{children:[n.name," ",n.number,Object(s.jsx)("button",{onClick:function(){return t(n.id)},children:"delete"})]})},O={success:{color:"green",background:"lightgrey",fontSize:"22px",padding:"10px",marginBottom:"10px"},fail:{color:"red",background:"lightgrey",fontSize:"22px",padding:"10px",marginBottom:"10px"}},p=function(e){var n=e.message;return null===n?null:n.includes("server")?Object(s.jsx)("div",{className:"error",style:O.fail,children:n}):Object(s.jsx)("div",{className:"error",style:O.success,children:n})},x=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),b=Object(o.a)(a,2),j=b[0],f=b[1],O=Object(r.useState)(""),x=Object(o.a)(O,2),v=x[0],g=x[1],w=Object(r.useState)(""),S=Object(o.a)(w,2),k=S[0],y=S[1],C=Object(r.useState)(null),A=Object(o.a)(C,2),B=A[0],N=A[1];Object(r.useEffect)((function(){h.getAll().then((function(e){return c(e)}))}),[]);return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(p,{message:B}),Object(s.jsx)(l,{newSearch:k,handleSearch:function(e){y(e.target.value)}}),Object(s.jsx)("h2",{children:"Add a new"}),Object(s.jsx)(d,{submission:function(e){e.preventDefault();var n,r,a={name:j,number:v},u=t.find((function(e){return e.name===j}));u?(n=u,r=v,window.confirm("".concat(n.name," is already added to phonebook. Replace the old number with a new one?"))?h.update(n.id,Object(i.a)(Object(i.a)({},n),{},{number:r})).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e}))),f(""),g("")})):console.log("fail")):h.create(a).then((function(e){c(t.concat(e)),N("".concat(j," has been added to phonebook")),setTimeout((function(){N(null)}),5e3),f(""),g("")}))},changeHandler:function(e){"name"===e.target.name?f(e.target.value):g(e.target.value)},name:j,number:v}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)("ul",{children:t.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())})).map((function(e){return Object(s.jsx)(m,{person:e,deleted:function(){return n=e.id,void h.remove(n).then((function(){c(Object(u.a)(t).filter((function(e){return e.id!==n})))})).catch((function(){N("information already removed from server"),setTimeout((function(){N(null)}),5e3),c(Object(u.a)(t).filter((function(e){return e.id!==n})))}));var n}},e.name)}))})]})};a.a.render(Object(s.jsx)(x,{}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.ec04b202.chunk.js.map